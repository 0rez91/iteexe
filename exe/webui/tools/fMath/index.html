<!doctype html>

<html>
<head>
	<title>FMath Javascript Equation Editor</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" href="js/jquery-ui/jquery-ui.min.css">
	<link rel="stylesheet" href="css/editor.css">

	<script src="js/jquery-ui/external/jquery/jquery.js"></script>
	<script src="js/jquery-ui/jquery-ui.min.js"></script>

	<script src="js/codemirror/lib/codemirror.js"></script>
	<link rel="stylesheet" href="js/codemirror/lib/codemirror.css">
	<script src="js/codemirror/mode/xml/xml.js"></script>
	<script src="js/codemirror/addon/selection/active-line.js"></script>


	<script src="js/fmathEditorC.js"></script>
	<script src="fonts/fmathFormulaFonts.js"></script>

	<script src="js/fmathEditorJQuery.js"></script>


	<script src='js/spectrum.js'></script>
	<link rel='stylesheet' href='css/spectrum.css' />
	
	<style>
		body{font-family:Verdana,​Arial,​Helvetica,​sans-serif}
		#settings{display:none!important}
	</style>

</head>
<body>
<div id="editor1"></div>
<script>
	FMATH.ApplicationConfiguration.setFolderUrlForFonts("fonts");
	FMATH.ApplicationConfiguration.setFolderUrlForGlyphs("glyphs");

	var e1 = $( "#editor1" ).mathEditor({ width: 965, height:400 });
	e1.mathEditor("setSaveCallback", clientSaveMethod);
	// setMathML or setLatex
	var latexCode = "";
	try {
		e1.mathEditor("setLatex", opener.PasteMathDialog.mathEditor.field.value);
	} catch(e) {
		
	}

	function clientSaveMethod(){
		// getLatex or getMathML
		// Type could be CHARS, ENTITIES or UNICODE;
		// e1.mathEditor("getMathML", "UNICODE", "true");
		try {
			opener.PasteMathDialog.mathEditor.field.value = e1.mathEditor("getLatex");
			window.close();
		} catch(e) {
			
		}		
	}
	
	$(function(){
		// We hide some elements
		$("IMG").each(function(){
			var e = $(this);
			var src = e.attr("src");
			if (src=="img/toolbar_handler.png" || src=="img/toolbar_handlerV.png") e.hide();
		});
		// We set a smaller font size for the editor's footer (path)
		var corners = $(".ui-corner-all");
		corners.eq(corners.length-1).css({
			"font-size":"10px",
			"line-height":"21px"
		});
	});
</script>
</body>
</html>